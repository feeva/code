{"version":3,"sources":["webpack:///./src/components/canvas.js","webpack:///./src/pages/rainrun.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.string.trim.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/_array-fill.js","webpack:///./src/images/boy_running.png","webpack:///./src/styles/rain.module.css","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.array.fill.js"],"names":["Canvas2D","canvas","width","getWidth","canvasContext","getHeight","height","start","updateFrame","startTime","Date","now","stopped","refresh","objects","draw","requestAnimationFrame","stop","keepOld","ctx","colorGroups","clearRect","i","length","o","color","push","tagName","drawImage","left","top","beginPath","fillStyle","arr","count","type","moveTo","cx","cy","arc","r","Math","PI","fillRect","x","y","fill","this","document","getElementById","offsetWidth","offsetHeight","getContext","hammersleySequence","Number","toString","Array","join","parseInt","split","reverse","inverseBits","RainRun","boyCanvas","rainCanvas","boyImage","RunLength","RainColor","RainHitColor","ViewWidth","ViewHeight","help","alert","$","text","prototype","reset","AnimationSpeed","_this","css","show","transition","transform","MaxVx","Vx","val","Vy","CanvasWidth","CanvasHeight","X0","Y0","StartTime","RunSpeed","RainDensity","RainDropRadius","HitCount","prop","RainDrops","time","play","update","hide","t","bitmap","getImageData","data","arrUpdate","rd","RainRunPage","componentDidMount","rainRun","setTimeout","click","e","target","on","scrollLeft","render","style","title","description","className","highlight","id","href","onClick","position","border","overflow","opacity","overflowX","htmlFor","defaultValue","value","display","textAlign","marginTop","rel","src","alt","React","Component","$trim","toObject","toAbsoluteIndex","toLength","module","exports","O","aLen","arguments","index","undefined","end","endPos","$export","P"],"mappings":"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","file":"component---src-pages-rainrun-js-f560ec0e48d9447b0d0d.js","sourcesContent":["/******************************************************\r\n * canvas.js\r\n * (c) 2014, Dylan Yi, http://start.goodtime.co.kr\r\n * MIT License\r\n *\r\n * 사용 예:\r\n * var canvas = new Canvas2D('canvas', 500);\r\n * canvas.add(new VerletObject(\r\n *     canvas.getWidth(), canvas.getHeight(), [\r\n *     {x: 100, y: 50, r: 10},\r\n *     {x: 200, y: 60, r: 10}\r\n *     ], [0, 1]\r\n * ));\r\n * canvas.start(function(t) {\r\n *     // 개체 위치 등 갱신\r\n * });\r\n ******************************************************/\r\n\r\n/**\r\n * HTML5 canvas의 추상 객체\r\n * @param canvas HTML canvas 요소 또는 그 ID. 미리 크기가 지정돼 있어야 한다.\r\n * @param width canvas의 가상 가로 크기. 지정하지 않으면 실제 크기.\r\n */\r\nexport default class Canvas2D {\r\n\r\n    constructor(canvas, width) {\r\n        this.stop();\r\n\r\n        if (typeof(canvas) == 'string')\r\n            canvas = document.getElementById(canvas);\r\n\r\n        canvas.width = width || canvas.offsetWidth;\r\n        canvas.height = width ? (width * canvas.offsetHeight / canvas.offsetWidth) : canvas.offsetHeight;\r\n\r\n        this.canvasContext = canvas.getContext('2d');\r\n    }\r\n\r\n    getWidth = () => this.canvasContext.canvas.width;\r\n\r\n    getHeight = () => this.canvasContext.canvas.height;\r\n\r\n    start = (updateFrame) => {\r\n        const startTime = Date.now()\r\n\r\n        const refresh = () => {\r\n            if (this.stopped)\r\n                return;\r\n\r\n            const objects = updateFrame(startTime);\r\n            this.draw(objects);\r\n\r\n            requestAnimationFrame(refresh);\r\n        };\r\n\r\n        this.stopped = false;\r\n        refresh();\r\n    };\r\n\r\n    stop = () => this.stopped = true;\r\n\r\n    /**\r\n     * 그림 개체를 캔버스에 그린다.\r\n     * 개체는 SVG와 비슷한 속성을 가지고 있어야 한다.\r\n     * type: circle, rect, ...\r\n     * circle일 경우 cx, cy, r 속성 필요\r\n     * rect일 경우 x, y, width, height 속성 필요\r\n     * fill 속성에 따라 색칠\r\n     * 예외적으로 tagName 속성이 IMG면 이미지 그리기 처리\r\n     */\r\n    draw = (objects, keepOld) => {\r\n        const ctx = this.canvasContext, colorGroups = {};\r\n        if (!keepOld)\r\n            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n        for (let i = 0; i < objects.length; ++i) {\r\n            const o = objects[i];\r\n\r\n            if (o.color) {\r\n                (colorGroups[o.color] || (colorGroups[o.color] = [])).push(o);\r\n            } else if (o.tagName === 'IMG') {\r\n                ctx.drawImage(o, o.left, o.top);\r\n            }\r\n        }\r\n\r\n        // fillStyle 변경, fill() 호출 등은 비싼 메서드이므로\r\n        // 같은 종류끼리 모아서 그리도록 한다\r\n        for (let color in colorGroups) {\r\n            ctx.beginPath();\r\n            ctx.fillStyle = color;\r\n            const arr = colorGroups[color];\r\n\r\n            for (let i = 0, count = arr.length; i < count; ++i) {\r\n                const o = arr[i];\r\n                if (o.type === 'circle') {\r\n                    ctx.moveTo(o.cx, o.cy);\r\n                    ctx.arc(o.cx, o.cy, o.r, 0, Math.PI * 2);\r\n                } else if (o.type === 'rect') {\r\n                    ctx.fillRect(o.x, o.y, o.width, o.height);\r\n                }\r\n            }\r\n            ctx.fill();\r\n        }\r\n    };\r\n}\r\n\r\n","import style from '../styles/rain.module.css'\r\n\r\nimport React from 'react'\r\n\r\nimport SEO from '../components/seo'\r\nimport $ from 'jquery'\r\nimport Canvas2D from '../components/canvas'\r\n\r\nimport boyImage from '../images/boy_running.png';\r\n\r\n/**\r\n * Hammersley 수열\r\n * 0: 0, 1: .5, 2: .25, 3: .75, 4: .125, 5: .675, ...\r\n */\r\nfunction hammersleySequence(i) {\r\n    return inverseBits(i) / 0x100000000;\r\n}\r\n\r\nfunction inverseBits(i) {\r\n    i = Number(i).toString(2);\r\n    i = new Array(33 - i.length).join('0') + i;\r\n    return parseInt(i.split('').reverse().join(''), 2);\r\n\r\n    // 아래는 http://holger.dammertz.org/stuff/notes_HammersleyOnHemisphere.html\r\n    // 참고하여 JavaScript로 변환한 루틴. >>> 0은 부호 없는 연산이 되게 한다.\r\n    // i = (((i << 16) >>> 0) | (i >>> 16)) >>> 0;\r\n    // i = ((((i & 0x55555555) << 1) >>> 0) | ((i & 0xAAAAAAAA) >>> 1)) >>> 0;\r\n    // i = ((((i & 0x33333333) << 2) >>> 0) | ((i & 0xCCCCCCCC) >>> 2)) >>> 0;\r\n    // i = ((((i & 0x0F0F0F0F) << 4) >>> 0) | ((i & 0xF0F0F0F0) >>> 4)) >>> 0;\r\n    // i = ((((i & 0x00FF00FF) << 8) >>> 0) | ((i & 0xFF00FF00) >>> 8)) >>> 0;\r\n    // return i;\r\n}\r\n\r\nfunction RainRun(width, height) {\r\n    this.boyCanvas = new Canvas2D('boyCanvas');\r\n    this.rainCanvas = new Canvas2D('rainCanvas');\r\n    this.boyImage = document.getElementById('boyImage');\r\n    \r\n    this.RunLength = 2000;\r\n    this.RainColor = '#99f';\r\n    this.RainHitColor = '#f00';\r\n    this.ViewWidth = width;\r\n    this.ViewHeight = height;\r\n\r\n    this.boyImage.top = this.ViewHeight - 200;//this.boyImage.height;\r\n    this.boyImage.left = 0;\r\n\r\n};\r\n\r\nRainRun.prototype.reset = function () {\r\n    // 이미 애니메이션 중이면 재진입 방식이 되어 애니메이션이 가속되는 문제 발생\r\n    if (this.AnimationSpeed > 0) {\r\n        this.AnimationSpeed = 0;\r\n        let _this = this;\r\n        requestAnimationFrame(function() { _this.reset(); });\r\n        return;\r\n    }\r\n\r\n    $('#canvasContainer').css('height', '240px');\r\n    $('#boyCanvas').show();\r\n    $('#scrollBar').show();\r\n    $('#rainCanvas').css({\r\n        transition: 'none',\r\n        transform: 'none'\r\n    });\r\n\r\n    this.MaxVx = .4;\r\n    this.Vx = Number($('#rainSpeed').val()) / 5; // 비의 가로 속도\r\n    this.Vy = 1; // 비의 세로 속도\r\n    this.CanvasWidth = this.ViewWidth + this.RunLength * this.MaxVx;\r\n    this.CanvasHeight = this.RunLength * this.Vy + 240;\r\n    this.X0 = this.Vx <= 0 ? 0 : this.CanvasWidth - this.ViewWidth;\r\n    this.Y0 = this.RunLength * this.Vy;\r\n    this.StartTime = Date.now();\r\n    this.RunSpeed = $('#runSpeed').val() / 2;\r\n    this.RainDensity = Number($('#rainDensity').val() / 5);\r\n    this.RainDropRadius = 2 + Number($('#rainDropRadius').val());\r\n    this.AnimationSpeed = Number($('#animationSpeed').val()) * 2;\r\n    // if (navigator.userAgent.indexOf('Chrome') < 0)\r\n    //     this.AnimationSpeed *= .75;\r\n    this.HitCount = 0;\r\n\r\n    $('#scroller').css(\r\n        'width', ($('#scrollBar').width() + this.RunLength) + 'px'\r\n    );\r\n    $('#scrollBar').prop('scrollLeft', 0);\r\n    $('#rainCanvas').css({\r\n        left: -this.X0 + 'px',\r\n        width: this.CanvasWidth + 'px',\r\n        top: (-this.RunLength * this.Vy - 240 + this.ViewHeight) + 'px',\r\n        height: (this.RunLength * this.Vy + 240) + 'px'\r\n    });\r\n    this.rainCanvas.canvasContext.canvas.width = this.CanvasWidth;\r\n    this.rainCanvas.canvasContext.canvas.height = this.CanvasHeight;\r\n\r\n    this.RainDrops = [];\r\n    for (var i = 0, count = 2000 * this.RainDensity; i < count; ++i) {\r\n        this.RainDrops.push({\r\n            type: 'circle',\r\n            cx: hammersleySequence(i) * this.CanvasWidth,\r\n            cy: this.Y0 - i / this.RainDensity * this.RunLength / 2000,\r\n            r: this.RainDropRadius,\r\n            color: this.RainColor\r\n        })\r\n    }\r\n\r\n    this.rainCanvas.draw(this.RainDrops);\r\n\r\n    let _this = this;\r\n    let time = parseInt($('#scrollBar').prop('scrollLeft'));\r\n\r\n    function play() {\r\n        time += _this.AnimationSpeed;\r\n        if (time < _this.RunLength && _this.boyImage.left < _this.ViewWidth) {\r\n            $('#scrollBar').prop('scrollLeft', time);\r\n            _this.update(time);\r\n\r\n            if (_this.AnimationSpeed > 0)\r\n                requestAnimationFrame(play);\r\n        } else {\r\n            _this.AnimationSpeed = 0;\r\n            $('#btnStop').hide();\r\n            $('#btnBirdView').show();\r\n        }\r\n    }\r\n    requestAnimationFrame(play);\r\n\r\n    if (this.AnimationSpeed > 0) {\r\n        $('#btnStop').show();\r\n    } else {\r\n        $('#btnStop').hide();\r\n    }\r\n    $('#btnBirdView').hide();\r\n}\r\n\r\nRainRun.prototype.update = function (t) {\r\n    $('#rainCanvas').css({\r\n        left: (-this.X0 + this.Vx * t) + 'px',\r\n        top: (-this.Y0 + this.Vy * t) + 'px'\r\n    });\r\n\r\n    this.boyImage.left = (this.boyImage.startTime && t > this.boyImage.startTime ? (t - this.boyImage.startTime) : 0) * this.RunSpeed;\r\n    this.boyCanvas.draw([this.boyImage]);\r\n\r\n    var bitmap = this.boyCanvas.canvasContext.getImageData(0, 0, this.ViewWidth, this.ViewHeight).data;\r\n\r\n    var arrUpdate = [];\r\n    for (var i = 0, count = this.RainDrops.length; i < count; ++i) {\r\n        var rd = this.RainDrops[i],\r\n            x = (rd.cx - this.X0 + this.Vx * t) | 0,\r\n            y = (rd.cy - this.Y0 + this.Vy * t) | 0\r\n            ;\r\n\r\n        // check alpha\r\n        if (x >= 0 && y >= 0 && x < this.ViewWidth && y < this.ViewHeight\r\n            && bitmap[(this.ViewWidth * y + x) * 4 + 3] > 0) {\r\n            if (rd.color !== this.RainHitColor) {\r\n                rd.color = this.RainHitColor;\r\n                this.HitCount++;\r\n                arrUpdate.push(rd);\r\n            }\r\n            if (!this.boyImage.startTime)\r\n                this.boyImage.startTime = t;\r\n        }\r\n    }\r\n    this.rainCanvas.draw(arrUpdate, true);\r\n\r\n    $('#hitCount').text(this.HitCount);\r\n};\r\n\r\nfunction help() {\r\n    alert($('#help').text());\r\n\r\n    return false;\r\n}\r\n\r\nclass RainRunPage extends React.Component {\r\n\r\n    componentDidMount() {\r\n        const rainRun = new RainRun(\r\n            $('#boyCanvas').width(),\r\n            $('#boyCanvas').height()\r\n        );\r\n\r\n        setTimeout(() => rainRun.reset(), 1000);\r\n\r\n        $('#btnReset').click(() => rainRun.reset());\r\n\r\n        $('#btnStop').click(e => {\r\n            rainRun.AnimationSpeed = 0;\r\n            $(e.target).hide();\r\n            $('#btnBirdView').show();\r\n        });\r\n\r\n        $('#scrollBar').on('scroll', e => {\r\n            const t = e.target.scrollLeft;\r\n            rainRun.update(t);\r\n        });\r\n\r\n        $('#btnBirdView').click(() => {\r\n            $('#canvasContainer').css('height', '740px');\r\n            $('#boyCanvas').hide();\r\n            $('#scrollBar').hide();\r\n            $('#rainCanvas').css({\r\n                left: -(rainRun.CanvasWidth - 900) / 2 + 'px',\r\n                top: -(rainRun.CanvasHeight - 740 - 80) / 2 + 'px',\r\n                transform: 'scale(.36, .36)',\r\n                transition: 'all 1.6s ease-in-out'\r\n            })\r\n        });\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div style={{width: '900px'}}>\r\n                <SEO title=\"비 맞기 시뮬레이션\" description=\"비 올 때 걷거나 뛰는 속력에 따른 비 맞기 시뮬레이션\" />\r\n\r\n                <div className={style.highlight}>\r\n                    비에 맞은 양: <span id=\"hitCount\">0</span>방울 <a href=\"#none\" onClick={help}>(?)</a>\r\n                </div>\r\n\r\n                <div id=\"canvasContainer\" style={{position: 'relative', border: 'solid 1px #ddd', height: '240px', overflow: 'hidden'}}>\r\n                    <canvas id=\"boyCanvas\" style={{width: '100%', height: '100%', position: 'absolute', left: '0', top: '0'}}></canvas>\r\n                    <canvas id=\"rainCanvas\" style={{width: '100%', height: '100%', position: 'absolute', left: '0', top: '0', opacity: '.5'}}></canvas>\r\n                </div>\r\n\r\n                <div id=\"scrollBar\" style={{width: '100%', overflowX: 'scroll'}}>\r\n                    <div id=\"scroller\" style={{height: '1px'}}></div>\r\n                </div>\r\n\r\n                <div>\r\n                    <label htmlFor=\"runSpeed\">달리기 속력:\r\n                        <select id=\"runSpeed\" defaultValue=\"3\">\r\n                            <option value=\"1\">1</option><option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option><option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                        </select>\r\n                    </label>\r\n                    <label htmlFor=\"rainSpeed\">바람:\r\n                        <select id=\"rainSpeed\" defaultValue=\"0\">\r\n                            <option value=\"-2\">-2(동풍)</option>\r\n                            <option value=\"-1\">-1(동풍)</option>\r\n                            <option value=\"0\">없음</option>\r\n                            <option value=\"1\">1(동풍)</option>\r\n                            <option value=\"2\">2(서풍)</option>\r\n                        </select>\r\n                    </label>\r\n                    <label htmlFor=\"rainDensity\">비 밀도:\r\n                        <select id=\"rainDensity\" defaultValue=\"3\">\r\n                            <option value=\"1\">1</option><option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option><option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                        </select>\r\n                    </label>\r\n                    <label htmlFor=\"rainDropRadius\">빗방울 크기:\r\n                        <select id=\"rainDropRadius\" defaultValue=\"3\">\r\n                            <option value=\"1\">1</option><option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option><option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                        </select>\r\n                    </label>\r\n                    <label htmlFor=\"animationSpeed\">애니메이션 속도:\r\n                        <select id=\"animationSpeed\" defaultValue=\"1\">\r\n                            <option value=\"0\">애니메이션 안함</option>\r\n                            <option value=\"1\">1</option><option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option><option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                        </select>\r\n                    </label>\r\n\r\n                    <button id=\"btnReset\" type=\"button\">설정!</button>\r\n                    <button id=\"btnStop\" type=\"button\">정지</button>\r\n                    <button id=\"btnBirdView\" type=\"button\">맞은 비 보기</button>\r\n                </div>\r\n\r\n                <div id=\"help\" style={{display: 'none'}}>비올 때 걷거나 뛰는 속력에 따른 비 맞는 양을 보기 위한 시뮬레이션입니다.\r\n\r\n        화면 아래 쪽의 여러 조건에 따라 시뮬레이션을 달리 해보실 수 있고 애니메이션으로 실행한 경우 [맞은 비 보기]를 눌러 전체 비의 양 대비 맞은 비의 양을 시각적으로 확인하실 수 있습니다. 소년은 비를 한 방울이라도 맞는 시점에야 움직이기 시작합니다.\r\n\r\n        본 프로그램은 HTML5 기반이므로 인터넷 익스플로러의 경우 버전 9 이상이어야 합니다.\r\n                </div>\r\n\r\n                <div style={{textAlign: 'center', marginTop: '1em'}}>\r\n                    (c) 2014, 2020, 이동련<br/> <a href=\"https://feeva.github.io\" target=\"_blank\" rel=\"noreferrer\">Nothing New Under the Sun</a>\r\n                </div>\r\n\r\n                <img id=\"boyImage\" src={boyImage} style={{position: 'absolute', width: '-1000px', top: '-1000px'}} alt=\"boy\"/>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default RainRunPage;\r\n","'use strict';\n// 21.1.3.25 String.prototype.trim()\nrequire('./_string-trim')('trim', function ($trim) {\n  return function trim() {\n    return $trim(this, 3);\n  };\n});\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","module.exports = __webpack_public_path__ + \"static/boy_running-2d2ec5ae67c4a860c2829d7b40760dc7.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"highlight\":\"rain-module--highlight--1s6z7\"};","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n"],"sourceRoot":""}